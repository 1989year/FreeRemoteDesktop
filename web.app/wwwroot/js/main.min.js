const msgbox = (body) => {
	if ($('#toasts').length == 0) {
		$('body').append(`<div class="toast-container p-3 top-0 end-0">
			<div id="toasts-message"></div>
		</div>`)
	}
	let toastTemplate = `<div class="mb-3 toast" role="alert" aria-live="assertive" aria-atomic="true">
		<div class="toast-body">
				${body}
			</div>
		</div>`;
	let $toast = $(toastTemplate)
	$('#toasts-message').append($toast)
	$toast.toast('show').on('hidden.bs.toast', function () {
		$toast.remove()
	})
}

HTMLElement.prototype.load = async function (url) {
	try {
		const response = await fetch(url);
		if (response.ok) {
			this.innerHTML = await response.text();
		}
	} catch (error) {
		msgbox(error.message)
	}
}

HTMLElement.prototype.loop = async function (url, ts) {
	try {
		await this.load(url);
	} finally {
		setTimeout(() => this.loop(url, ts), ts)
	}
}